#include <Windows.h>
#include <stdio.h>

int main(int argc, char *argv[])
{
	HWND wnd;
	DWORD style;
	RECT screen;
	
	wnd = FindWindow("Emacs", NULL);
	if (!wnd)
		return -1;

	style = GetWindowLongPtr(wnd, GWL_STYLE);
	if (style & WS_CAPTION) {
		style &= ~(WS_CAPTION | WS_BORDER | WS_THICKFRAME | WS_VSCROLL);
		SetWindowLongPtr(wnd, GWL_STYLE, style);

		GetClientRect(GetDesktopWindow(), &screen);
		SetWindowPos(wnd, NULL, 0, -5, screen.right, screen.bottom + 6,
			SWP_ASYNCWINDOWPOS);
		printf("(efs fullscreen)");
	}
	else {
		SetWindowLongPtr(wnd, GWL_STYLE, 0x16cf0000);
		ShowWindowAsync(wnd, SW_MAXIMIZE);
		printf("(efs maximize)");
	}
	return 0;
}
